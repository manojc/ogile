<div class="container mtl">
    <div class="col-lg-offset-2 col-lg-8">
        <h2>Create New Objective</h2>
    </div>
    <mat-card class="col-lg-offset-2 col-lg-8">
        <form [formGroup]="form">
            <div class="row">
                <mat-form-field class="col-lg-12">
                    <input matInput placeholder="Objective Name" formControlName="name">
                    <mat-error *ngIf="form?.controls?.name?.hasError('required')">
                        Objective name is required!
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="row">
                <mat-form-field class="col-lg-12">
                    <textarea matInput placeholder="Description" formControlName="description" rows="5"></textarea>
                    <mat-error *ngIf="form?.controls?.name?.hasError('required')">
                        Objective description is required!
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="row mtl">
                <div class="col-lg-3">
                    <h3>Key Results</h3>
                </div>
                <div class="col-lg-offset-7 col-lg-2">
                    <h3><button class="btn btn-success btn-sm" (click)="addKeyResult()">add new</button></h3>
                </div>
            </div>
            <div class="row">
                <div formArrayName="keyResults" class="col-lg-12">
                    <div *ngFor="let keyResult of keyResults.controls; index as i">
                        <div class="row mtl">
                            <div class="col-lg-10">
                                <input matInput [formControlName]="i" placeholder="key result {{i+1}}">
                                <mat-error *ngIf="keyResult?.hasError('required')">
                                    Key result is required!
                                </mat-error>
                            </div>
                            <div class="col-lg-2" *ngIf="keyResults?.controls?.length > 1">
                                <button class="btn btn-danger btn-sm" (click)="removeKeyResult(i)">remove</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mtl"></div>
            <div class="row mtl">
                <button mat-raised-button color="primary" class="col-lg-12" (click)="create()" [disabled]="!form?.valid">
                    Create Objective
                </button>
            </div>
        </form>
    </mat-card>
</div>